
// List of Thai herbs
export const herbList = [
  "ใบบัวบก", "ใบเตย", "ใบย่านาง", "กุ่ยช่าย", "โหระพา", "ข่า", "ขมิ้น", "ขิง", "กระชาย", "กะเพรา",
  "กระเทียม", "แมงลัก", "ผักชี", "ผักชีฝรั่ง", "ผักชีลาว", "ผักไผ่", "พริกชี้ฟ้า", "พริกขี้หนู", "พริกขี้หนูสวน", "พริกไทยอ่อน",
  "พริกหยวก", "รากผักชี", "สะระแหน่", "ตะไคร้", "มะกรูด", "ดีปลี", "ดอกเงี้ยว", "กานพลู", "ลูกจันทน์เทศ", "มะแขว่น",
  "งา", "อบเชย", "ผงกะหรี่", "ผงพะโล้", "พริกแห้ง", "พริกป่น", "พริกไทยดำ", "พริกไทย (พริกไทยขาว)", "เทียนข้าวเปลือก", "ใบปอ",
  "ใบยอ", "บวบหอม", "บวบเหลี่ยม", "ชะพลู", "หอมแดง", "กะหล่ำปลี", "ขี้เหล็ก", "กระเจี๊ยบ", "มะเขือพวง", "มะเขือเปราะ",
  "มะเขือเทศ", "มะระ", "มะรุม", "หน่อไม้", "หน่อไม้ฝรั่ง", "ผักชีล้อม", "ผักกาดฮ่องเต้", "ผักกาดขาว", "ผักกาดเขียว", "ผักแขยง",
  "ผักกระเฉด", "ผักกระถิน", "ผักกวางตุ้ง", "ผักเสี้ยน", "ผักแว่น", "ผักหวาน", "เหรียง", "สะตอข้าว", "แตงกวา", "ตาลปัตรฤๅษี",
  "ถั่วฝักยาว", "ถั่วงอก", "ถั่วพู", "ชะอม", "ดาหลา", "ดอกอัญชัน", "ดอกแค", "ดอกแคทะเล", "ดอกแคหัวหมู", "ดอกสลิด",
  "ดอกโสน", "หัวปลี", "เล็บครุฑ", "ผักเหลียง", "ผักเลือด", "เพกา"
];

// Herb name translations (Thai -> English)
export const herbTranslations: Record<string, string> = {
  "ใบบัวบก": "Gotu Kola",
  "ใบเตย": "Pandan Leaf",
  "ใบย่านาง": "Yanang Leaf",
  "กุ่ยช่าย": "Chinese Chives",
  "โหระพา": "Thai Basil",
  "ข่า": "Galangal",
  "ขมิ้น": "Turmeric",
  "ขิง": "Ginger",
  "กระชาย": "Lesser Galangal",
  "กะเพรา": "Holy Basil",
  "กระเทียม": "Garlic",
  "แมงลัก": "Lemon Basil",
  "ผักชี": "Coriander",
  "ผักชีฝรั่ง": "Culantro",
  "ผักชีลาว": "Dill",
  "ผักไผ่": "Vietnamese Mint",
  "พริกชี้ฟ้า": "Chili Spur Pepper",
  "พริกขี้หนู": "Bird's Eye Chili",
  "พริกขี้หนูสวน": "Thai Chili",
  "พริกไทยอ่อน": "Young Peppercorns",
  "พริกหยวก": "Bell Pepper",
  "รากผักชี": "Coriander Root",
  "สะระแหน่": "Mint",
  "ตะไคร้": "Lemongrass",
  "มะกรูด": "Kaffir Lime",
  "ดีปลี": "Long Pepper",
  "ดอกเงี้ยว": "Kapok Flower",
  "กานพลู": "Clove",
  "ลูกจันทน์เทศ": "Nutmeg",
  "มะแขว่น": "Prickly Ash",
  "งา": "Sesame",
  "อบเชย": "Cinnamon",
  "ผงกะหรี่": "Curry Powder",
  "ผงพะโล้": "Five-Spice Powder",
  "พริกแห้ง": "Dried Chili",
  "พริกป่น": "Chili Powder",
  "พริกไทยดำ": "Black Pepper",
  "พริกไทย (พริกไทยขาว)": "White Pepper",
  "เทียนข้าวเปลือก": "Cumin",
  "ใบปอ": "Jute Leaf",
  "ใบยอ": "Noni Leaf",
  "บวบหอม": "Sponge Gourd",
  "บวบเหลี่ยม": "Angled Luffa",
  "ชะพลู": "Wild Betel Leafbush",
  "หอมแดง": "Shallot",
  "กะหล่ำปลี": "Cabbage",
  "ขี้เหล็ก": "Siamese Cassia",
  "กระเจี๊ยบ": "Roselle",
  "มะเขือพวง": "Thai Eggplant",
  "มะเขือเปราะ": "Green Brinjal",
  "มะเขือเทศ": "Tomato",
  "มะระ": "Bitter Gourd",
  "มะรุม": "Moringa",
  "หน่อไม้": "Bamboo Shoot",
  "หน่อไม้ฝรั่ง": "Asparagus",
  "ผักชีล้อม": "Water Dropwort",
  "ผักกาดฮ่องเต้": "Choy Sum",
  "ผักกาดขาว": "Napa Cabbage",
  "ผักกาดเขียว": "Mustard Greens",
  "ผักแขยง": "Rice Paddy Herb",
  "ผักกระเฉด": "Water Mimosa",
  "ผักกระถิน": "Lead Tree",
  "ผักกวางตุ้ง": "Chinese Cabbage",
  "ผักเสี้ยน": "Spiderwort",
  "ผักแว่น": "Asiatic Pennywort",
  "ผักหวาน": "Melientha Suavis",
  "เหรียง": "Niang Palm",
  "สะตอข้าว": "Stink Bean",
  "แตงกวา": "Cucumber",
  "ตาลปัตรฤๅษี": "Gymnema Inodorum",
  "ถั่วฝักยาว": "Yardlong Bean",
  "ถั่วงอก": "Bean Sprout",
  "ถั่วพู": "Winged Bean",
  "ชะอม": "Acacia Pennata",
  "ดาหลา": "Torch Ginger",
  "ดอกอัญชัน": "Butterfly Pea",
  "ดอกแค": "Sesbania Grandiflora",
  "ดอกแคทะเล": "Sea Bean",
  "ดอกแคหัวหมู": "Swamp Pea",
  "ดอกสลิด": "Cowslip Creeper",
  "ดอกโสน": "Sesbania Javanica",
  "หัวปลี": "Banana Blossom",
  "เล็บครุฑ": "Geranium Aralia",
  "ผักเหลียง": "Gnetum Gnemon",
  "ผักเลือด": "Houttuynia Cordata",
  "เพกา": "Broken Bones Tree"
};

// Generate placeholder images (in production you'd use real herb images)
export const getHerbImage = (herbName: string): string => {
  return `https://via.placeholder.com/150?text=${encodeURIComponent(herbName)}`;
};

// Status types for certifications
export type CertificationStatus = "Passed" | "Failed" | "Pending" | "Other";

// Status colors for certifications
export const statusColors: Record<CertificationStatus, string> = {
  "Passed": "bg-green-500 text-white",
  "Failed": "bg-red-500 text-white",
  "Pending": "bg-yellow-500 text-white",
  "Other": "bg-gray-400 text-white"
};

// Helper function to generate random status
export function generateRandomStatus(): CertificationStatus {
  const statuses: CertificationStatus[] = ["Passed", "Failed", "Pending", "Other"];
  return statuses[Math.floor(Math.random() * statuses.length)];
}

// Thai provinces
export const thaiProvinces = [
  "กรุงเทพมหานคร", "กระบี่", "กาญจนบุรี", "กาฬสินธุ์", "กำแพงเพชร", "ขอนแก่น", "จันทบุรี", "ฉะเชิงเทรา",
  "ชลบุรี", "ชัยนาท", "ชัยภูมิ", "ชุมพร", "เชียงราย", "เชียงใหม่", "ตรัง", "ตราด", "ตาก", "นครนายก",
  "นครปฐม", "นครพนม", "นครราชสีมา", "นครศรีธรรมราช", "นครสวรรค์", "นนทบุรี", "นราธิวาส", "น่าน",
  "บึงกาฬ", "บุรีรัมย์", "ปทุมธานี", "ประจวบคีรีขันธ์", "ปราจีนบุรี", "ปัตตานี", "พระนครศรีอยุธยา",
  "พะเยา", "พังงา", "พัทลุง", "พิจิตร", "พิษณุโลก", "เพชรบุรี", "เพชรบูรณ์", "แพร่", "ภูเก็ต",
  "มหาสารคาม", "มุกดาหาร", "แม่ฮ่องสอน", "ยโสธร", "ยะลา", "ร้อยเอ็ด", "ระนอง", "ระยอง", "ราชบุรี",
  "ลพบุรี", "ลำปาง", "ลำพูน", "เลย", "ศรีสะเกษ", "สกลนคร", "สงขลา", "สตูล", "สมุทรปราการ",
  "สมุทรสงคราม", "สมุทรสาคร", "สระแก้ว", "สระบุรี", "สิงห์บุรี", "สุโขทัย", "สุพรรณบุรี", "สุราษฎร์ธานี",
  "สุรินทร์", "หนองคาย", "หนองบัวลำภู", "อ่างทอง", "อำนาจเจริญ", "อุดรธานี", "อุตรดิตถ์", "อุทัยธานี", "อุบลราชธานี"
];

// Owner interface for farms
export interface Owner {
  name: string;
  phoneNumber: string;
  email: string;
  licenseNumber: string;
  registrationDate: string;
}

// Generate random Thai names
export function generateThaiName(): string {
  const firstNames = ["สมชาย", "สมศรี", "วิชัย", "กัญญา", "สุรพล", "มานี", "พิชัย", "ประภา", "ทองดี", "รัตนา", "ประเสริฐ", "นารี", "สมบัติ", "วันดี"];
  const lastNames = ["สุขสบาย", "ใจดี", "รักเรียน", "แสนดี", "คงเจริญ", "มีทรัพย์", "เงินมาก", "ใจเย็น", "มีศักดิ์", "สุขสันต์", "มากมี", "พึ่งได้", "รุ่งเรือง", "มั่งคั่ง", "ยั่งยืน"];
  
  return `${firstNames[Math.floor(Math.random() * firstNames.length)]} ${lastNames[Math.floor(Math.random() * lastNames.length)]}`;
}

// Generate random phone numbers
export function generatePhoneNumber(): string {
  const prefixes = ["08", "09", "06"];
  const prefix = prefixes[Math.floor(Math.random() * prefixes.length)];
  let number = "";
  for (let i = 0; i < 8; i++) {
    number += Math.floor(Math.random() * 10);
  }
  return `${prefix}${number}`;
}

// Generate random email
export function generateEmail(name: string): string {
  const providers = ["gmail.com", "hotmail.com", "yahoo.com", "outlook.com", "thaiherb.co.th", "herbfarm.th"];
  const provider = providers[Math.floor(Math.random() * providers.length)];
  const simplifiedName = name.toLowerCase().replace(/\s+/g, "").replace(/[^\w\s]/gi, "");
  
  return `${simplifiedName}${Math.floor(Math.random() * 1000)}@${provider}`;
}

// Farm interface
export interface Farm {
  id: number;
  name: string;
  herb: string;
  gapc: CertificationStatus;
  euGmp: CertificationStatus;
  dttm: CertificationStatus;
  tis: CertificationStatus;
  location: {
    lat: number;
    lng: number;
  };
  owner: Owner;
  province: string;
  registrationNumber: string;
  organicCertified: boolean;
  lastInspectionDate: string;
  nextInspectionDate: string;
  fdaApproved: boolean;
  cultivationArea: number; // in rai
  establishedYear: number;
}

// Trace interface with expanded metadata
export interface Trace {
  id: string; // Changed from number to string for consistency
  herb: string;
  event: string;
  timestamp: string;
  location: {
    lat: number;
    lng: number;
  };
  referenceCode?: string;
  farmId: number;
  batchNumber: string;
  quantity: number;
  unit: string;
  qualityGrade: "A" | "B" | "C" | "Premium";
  moistureLevel?: number;
  notes?: string;
  inspector?: string;
  inspectionReport?: string;
  temperature?: number;
  humidity?: number;
  transportMethod?: string;
  destinationName?: string;
  destinationContact?: string;
  certifications: string[];
}

// List of certifications
export const certificationTypes = [
  "GACP", "EU-GMP", "DTTM-Standard", "TIS", 
  "Organic Thailand", "USDA Organic", "EU Organic", 
  "FDA Approved", "GI Protected", "Global GAP"
];

// Generate random farm name
export function generateRandomName(id: number): string {
  const prefixes = ["สวน", "ฟาร์ม", "ไร่", "สวนเกษตร", "ฟาร์มสมุนไพร", "แปลงเกษตร"];
  const suffixes = ["พัฒนา", "อินทรีย์", "ธรรมชาติ", "สมุนไพรไทย", "เกษตรดี", "กรีน", "ออร์แกนิค", "บ้านสวน"];
  
  const prefix = prefixes[Math.floor(Math.random() * prefixes.length)];
  const suffix = suffixes[Math.floor(Math.random() * suffixes.length)];
  
  return `${prefix}${id} ${suffix}`;
}

// Generate random date within range
export function generateRandomDate(start: Date, end: Date): string {
  const date = new Date(start.getTime() + Math.random() * (end.getTime() - start.getTime()));
  return date.toISOString();
}

// Generate random unit
export function generateRandomUnit(): string {
  const units = ["กิโลกรัม", "กรัม", "ต้น", "ถุง", "กระสอบ", "ตัน"];
  return units[Math.floor(Math.random() * units.length)];
}

// Generate random farmers with expanded information
export function generateFarmers(count = 100): Farm[] {
  const farmers: Farm[] = [];
  
  for (let i = 1; i <= count; i++) {
    const ownerName = generateThaiName();
    const herb = herbList[Math.floor(Math.random() * herbList.length)];
    const province = thaiProvinces[Math.floor(Math.random() * thaiProvinces.length)];
    const registrationYear = 2015 + Math.floor(Math.random() * 8);
    const registrationNumber = `${province.substring(0, 2)}-${registrationYear}-${1000 + Math.floor(Math.random() * 9000)}`;
    
    const lastInspectionDate = generateRandomDate(new Date(2023, 0, 1), new Date());
    const nextInspectionDate = generateRandomDate(new Date(), new Date(2025, 11, 31));
    
    const establishedYear = 2000 + Math.floor(Math.random() * 22);
    
    farmers.push({
      id: i,
      name: generateRandomName(i),
      herb,
      gapc: generateRandomStatus(),
      euGmp: generateRandomStatus(),
      dttm: generateRandomStatus(),
      tis: generateRandomStatus(),
      location: {
        lat: 13 + Math.random() * 5,
        lng: 98 + Math.random() * 5
      },
      owner: {
        name: ownerName,
        phoneNumber: generatePhoneNumber(),
        email: generateEmail(ownerName),
        licenseNumber: `DTTM-${registrationYear}-${1000 + Math.floor(Math.random() * 9000)}`,
        registrationDate: generateRandomDate(new Date(2015, 0, 1), new Date(2023, 11, 31))
      },
      province,
      registrationNumber,
      organicCertified: Math.random() > 0.5,
      lastInspectionDate,
      nextInspectionDate,
      fdaApproved: Math.random() > 0.3,
      cultivationArea: Math.floor(Math.random() * 50) + 1, // 1-50 rai
      establishedYear
    });
  }
  
  return farmers;
}

// Generate random traces with detailed information
export function generateTraces(count = 100): Trace[] {
  const events = ["Seeding", "Growing", "Harvesting", "Drying", "Processing", "Testing", "Packaging", "Shipping", "Delivered"];
  const traces: Trace[] = [];
  const farmers = generateFarmers(20); // Use a subset of farmers for traces
  
  for (let i = 1; i <= count; i++) {
    const farmIndex = Math.floor(Math.random() * farmers.length);
    const farm = farmers[farmIndex];
    const herb = farm.herb;
    const event = events[Math.floor(Math.random() * events.length)];
    const timestamp = new Date(Date.now() - Math.floor(Math.random() * 30 * 24 * 60 * 60 * 1000)).toISOString(); // Random date in the last 30 days
    const refCode = `TH-${Math.floor(1000 + Math.random() * 9000)}-${event.substring(0, 3).toUpperCase()}`;
    
    // Generate a subset of random certifications
    const numCerts = Math.floor(Math.random() * 3) + 1; // 1-3 certifications
    const certs: string[] = [];
    for (let j = 0; j < numCerts; j++) {
      const cert = certificationTypes[Math.floor(Math.random() * certificationTypes.length)];
      if (!certs.includes(cert)) {
        certs.push(cert);
      }
    }
    
    const batchNumber = `BATCH-${new Date().getFullYear()}-${Math.floor(1000 + Math.random() * 9000)}`;
    const quantity = Math.floor(Math.random() * 1000) + 1;
    const unit = generateRandomUnit();
    
    const qualityGrades: Array<"A" | "B" | "C" | "Premium"> = ["A", "B", "C", "Premium"];
    const qualityGrade = qualityGrades[Math.floor(Math.random() * qualityGrades.length)];
    
    traces.push({
      id: i.toString(), // Changed to string to match the Trace interface
      herb,
      event,
      timestamp,
      location: farm.location,
      referenceCode: refCode,
      farmId: farm.id,
      batchNumber,
      quantity,
      unit,
      qualityGrade,
      moistureLevel: event === "Drying" ? Math.floor(Math.random() * 20) + 5 : undefined,
      notes: Math.random() > 0.7 ? "ผลผลิตคุณภาพดี ไม่พบปัญหา" : undefined,
      inspector: Math.random() > 0.7 ? generateThaiName() : undefined,
      inspectionReport: Math.random() > 0.8 ? `REP-${Math.floor(1000 + Math.random() * 9000)}` : undefined,
      temperature: Math.random() > 0.5 ? Math.floor(Math.random() * 10) + 25 : undefined,
      humidity: Math.random() > 0.5 ? Math.floor(Math.random() * 30) + 50 : undefined,
      transportMethod: event === "Shipping" ? ["รถบรรทุก", "รถตู้", "รถกระบะ"][Math.floor(Math.random() * 3)] : undefined,
      destinationName: event === "Shipping" || event === "Delivered" ? `บริษัท${["สมุนไพรไทย", "เฮิร์บพลัส", "กรีนเมด", "ไทยเฮิร์บ"][Math.floor(Math.random() * 4)]} จำกัด` : undefined,
      destinationContact: event === "Shipping" || event === "Delivered" ? generatePhoneNumber() : undefined,
      certifications: certs
    });
  }
  
  return traces;
}

// Calculate status counts
export function calculateStatusCounts(farmers: Farm[], field: keyof Pick<Farm, 'gapc' | 'euGmp' | 'dttm' | 'tis'>) {
  return farmers.reduce((acc: Record<string, number>, f) => {
    acc[f[field]] = (acc[f[field]] || 0) + 1;
    return acc;
  }, {});
}
